"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.deleteNote = deleteNote;
exports.addNote = addNote;
exports.editNote = editNote;
exports.getNotes = getNotes;
function deleteNote(store, _id) {
	var url = "/note/" + _id;
	var params = "";
	var xhr = new XMLHttpRequest();
	xhr.open("DELETE", url, true);

	xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhr.send(params);
}

function addNote(noteText) {
	var url = "/note/add";
	var params = "noteText=" + noteText;
	var xhr = new XMLHttpRequest();
	xhr.open("POST", url, true);

	xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhr.send(params);
}

function editNote(_id, originalText) {
	var updatedNoteText = prompt("Note content:", originalText);

	var url = "/note/" + _id;
	var params = "noteText=" + updatedNoteText;
	var xhr = new XMLHttpRequest();
	xhr.open("PUT", url, true);

	xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhr.send(params);
}

function getNotes(store, search, cb) {
	search = '&' + search.substr(1);
	var url = "/note?dontRender=1" + search;
	var params = "";
	var xhr = new XMLHttpRequest();
	xhr.open("GET", url, true);

	xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhr.onload = function () {
		if (xhr.status === 200) {
			store.dispatch({ type: "receivedUpdatedNotes", payload: 0 });

			return cb(xhr.responseText);
		} else {
			alert('Request failed.  Returned status of ' + xhr.status);
		}
	};
	xhr.send(params);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9wdWJsaWMvamF2YXNjcmlwdHMvbm90ZXNEYXRhYmFzZUludGVyZmFjZS5qcyJdLCJuYW1lcyI6WyJkZWxldGVOb3RlIiwiYWRkTm90ZSIsImVkaXROb3RlIiwiZ2V0Tm90ZXMiLCJzdG9yZSIsIl9pZCIsInVybCIsInBhcmFtcyIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwibm90ZVRleHQiLCJvcmlnaW5hbFRleHQiLCJ1cGRhdGVkTm90ZVRleHQiLCJwcm9tcHQiLCJzZWFyY2giLCJjYiIsInN1YnN0ciIsIm9ubG9hZCIsInN0YXR1cyIsImRpc3BhdGNoIiwidHlwZSIsInBheWxvYWQiLCJyZXNwb25zZVRleHQiLCJhbGVydCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O1FBRWdCQSxVLEdBQUFBLFU7UUFVQUMsTyxHQUFBQSxPO1FBVUFDLFEsR0FBQUEsUTtRQVlBQyxRLEdBQUFBLFE7QUFoQ1QsU0FBU0gsVUFBVCxDQUFvQkksS0FBcEIsRUFBMkJDLEdBQTNCLEVBQWdDO0FBQ3RDLEtBQUlDLE1BQU0sV0FBU0QsR0FBbkI7QUFDQSxLQUFJRSxTQUFTLEVBQWI7QUFDQSxLQUFJQyxNQUFNLElBQUlDLGNBQUosRUFBVjtBQUNBRCxLQUFJRSxJQUFKLENBQVMsUUFBVCxFQUFtQkosR0FBbkIsRUFBd0IsSUFBeEI7O0FBRUFFLEtBQUlHLGdCQUFKLENBQXFCLGNBQXJCLEVBQXFDLG1DQUFyQztBQUNBSCxLQUFJSSxJQUFKLENBQVNMLE1BQVQ7QUFDQTs7QUFFTSxTQUFTTixPQUFULENBQWlCWSxRQUFqQixFQUEyQjtBQUNqQyxLQUFJUCxNQUFNLFdBQVY7QUFDQSxLQUFJQyxTQUFTLGNBQVlNLFFBQXpCO0FBQ0EsS0FBSUwsTUFBTSxJQUFJQyxjQUFKLEVBQVY7QUFDQUQsS0FBSUUsSUFBSixDQUFTLE1BQVQsRUFBaUJKLEdBQWpCLEVBQXNCLElBQXRCOztBQUVBRSxLQUFJRyxnQkFBSixDQUFxQixjQUFyQixFQUFxQyxtQ0FBckM7QUFDQUgsS0FBSUksSUFBSixDQUFTTCxNQUFUO0FBQ0E7O0FBRU0sU0FBU0wsUUFBVCxDQUFrQkcsR0FBbEIsRUFBdUJTLFlBQXZCLEVBQXFDO0FBQzNDLEtBQUlDLGtCQUFrQkMsT0FBTyxlQUFQLEVBQXdCRixZQUF4QixDQUF0Qjs7QUFFQSxLQUFJUixNQUFNLFdBQVNELEdBQW5CO0FBQ0EsS0FBSUUsU0FBUyxjQUFZUSxlQUF6QjtBQUNBLEtBQUlQLE1BQU0sSUFBSUMsY0FBSixFQUFWO0FBQ0FELEtBQUlFLElBQUosQ0FBUyxLQUFULEVBQWdCSixHQUFoQixFQUFxQixJQUFyQjs7QUFFQUUsS0FBSUcsZ0JBQUosQ0FBcUIsY0FBckIsRUFBcUMsbUNBQXJDO0FBQ0FILEtBQUlJLElBQUosQ0FBU0wsTUFBVDtBQUNBOztBQUVNLFNBQVNKLFFBQVQsQ0FBa0JDLEtBQWxCLEVBQXlCYSxNQUF6QixFQUFpQ0MsRUFBakMsRUFBcUM7QUFDM0NELFVBQVMsTUFBSUEsT0FBT0UsTUFBUCxDQUFjLENBQWQsQ0FBYjtBQUNBLEtBQUliLE1BQU0sdUJBQXFCVyxNQUEvQjtBQUNBLEtBQUlWLFNBQVMsRUFBYjtBQUNBLEtBQUlDLE1BQU0sSUFBSUMsY0FBSixFQUFWO0FBQ0FELEtBQUlFLElBQUosQ0FBUyxLQUFULEVBQWdCSixHQUFoQixFQUFxQixJQUFyQjs7QUFFQUUsS0FBSUcsZ0JBQUosQ0FBcUIsY0FBckIsRUFBcUMsbUNBQXJDO0FBQ0FILEtBQUlZLE1BQUosR0FBYSxZQUFXO0FBQ3ZCLE1BQUdaLElBQUlhLE1BQUosS0FBZSxHQUFsQixFQUF1QjtBQUN0QmpCLFNBQU1rQixRQUFOLENBQWUsRUFBQ0MsTUFBTSxzQkFBUCxFQUErQkMsU0FBUyxDQUF4QyxFQUFmOztBQUVBLFVBQU9OLEdBQUdWLElBQUlpQixZQUFQLENBQVA7QUFDQSxHQUpELE1BSU87QUFDTkMsU0FBTSx5Q0FBeUNsQixJQUFJYSxNQUFuRDtBQUNBO0FBQ0QsRUFSRDtBQVNBYixLQUFJSSxJQUFKLENBQVNMLE1BQVQ7QUFDQSIsImZpbGUiOiJub3Rlc0RhdGFiYXNlSW50ZXJmYWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVOb3RlKHN0b3JlLCBfaWQpIHtcblx0dmFyIHVybCA9IFwiL25vdGUvXCIrX2lkO1xuXHR2YXIgcGFyYW1zID0gXCJcIjtcblx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHR4aHIub3BlbihcIkRFTEVURVwiLCB1cmwsIHRydWUpO1xuXG5cdHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpO1xuXHR4aHIuc2VuZChwYXJhbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkTm90ZShub3RlVGV4dCkge1xuXHR2YXIgdXJsID0gXCIvbm90ZS9hZGRcIjtcblx0dmFyIHBhcmFtcyA9IFwibm90ZVRleHQ9XCIrbm90ZVRleHQ7XG5cdHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0eGhyLm9wZW4oXCJQT1NUXCIsIHVybCwgdHJ1ZSk7XG5cblx0eGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIiwgXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIik7XG5cdHhoci5zZW5kKHBhcmFtcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlZGl0Tm90ZShfaWQsIG9yaWdpbmFsVGV4dCkge1xuXHR2YXIgdXBkYXRlZE5vdGVUZXh0ID0gcHJvbXB0KFwiTm90ZSBjb250ZW50OlwiLCBvcmlnaW5hbFRleHQpO1xuXG5cdHZhciB1cmwgPSBcIi9ub3RlL1wiK19pZDtcblx0dmFyIHBhcmFtcyA9IFwibm90ZVRleHQ9XCIrdXBkYXRlZE5vdGVUZXh0O1xuXHR2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdHhoci5vcGVuKFwiUFVUXCIsIHVybCwgdHJ1ZSk7XG5cblx0eGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIiwgXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIik7XG5cdHhoci5zZW5kKHBhcmFtcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROb3RlcyhzdG9yZSwgc2VhcmNoLCBjYikge1xuXHRzZWFyY2ggPSAnJicrc2VhcmNoLnN1YnN0cigxKTtcblx0dmFyIHVybCA9IFwiL25vdGU/ZG9udFJlbmRlcj0xXCIrc2VhcmNoO1xuXHR2YXIgcGFyYW1zID0gXCJcIjtcblx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHR4aHIub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xuXG5cdHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpO1xuXHR4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG5cdFx0XHRzdG9yZS5kaXNwYXRjaCh7dHlwZTogXCJyZWNlaXZlZFVwZGF0ZWROb3Rlc1wiLCBwYXlsb2FkOiAwfSk7XG5cblx0XHRcdHJldHVybiBjYih4aHIucmVzcG9uc2VUZXh0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YWxlcnQoJ1JlcXVlc3QgZmFpbGVkLiAgUmV0dXJuZWQgc3RhdHVzIG9mICcgKyB4aHIuc3RhdHVzKTtcblx0XHR9XG5cdH07XG5cdHhoci5zZW5kKHBhcmFtcyk7XG59Il19